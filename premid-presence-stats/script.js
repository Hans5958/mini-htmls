let data={presence:{},category:{},author:{},lang:{},partner:[]},tables={},tableData={},tableSettings={columnDefs:[{targets:0,className:"details-control",orderable:!1}],order:[[1,"asc"]]},miniTableSettings={paging:!1,ordering:!1,info:!1,searching:!1},charts={},chartData={},step=0,totalSteps=3,locale={},imgurAllow=!1,totalUsers=0;const getData=(t,a=(()=>{}),e=(()=>{}),r=(()=>{}))=>{$.getJSON(t).done(t=>a(t)).fail(t=>e(t)).always(()=>r())};class List{constructor(t,a=[]){this.header=t,this.data=a}static inArray(t){if(Array.isArray(t.data))return t.data;var a=[];return Object.keys(t.data).forEach(e=>{a.push([]),Object.values(t.data[e]).forEach(t=>{a[a.length-1].push(t)})}),a}}const initChart=(t,a,e)=>{chartData[t]={labels:[],datasets:[{type:"bar",label:e,backgroundColor:"blue",data:[],borderColor:"white",borderWidth:0}]};var r=document.querySelector(a).getContext("2d");charts[t]=new Chart(r,{type:"bar",data:chartData[t],options:{responsive:!0,plugins:{title:{display:!1},legend:{display:!1},tooltips:{mode:"index",intersect:!0}}}})},forEveryPresence=t=>{Object.keys(data.presence).forEach(a=>{t(data.presence[a],a)})};document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector("#toc div div div"),a=[].slice.call(document.querySelectorAll("h2:not(.toc-ignore), h3:not(.toc-ignore), h4:not(.toc-ignore), h5:not(.toc-ignore), h6:not(.toc-ignore)"));a.forEach((e,r)=>{let s="toc-"+(r+1);e.hasAttribute("id")?s=e.getAttribute("id"):e.setAttribute("id",s);const n=document.createElement("a");n.setAttribute("href",`#${s}`),n.textContent=e.textContent;const o=document.createElement("div");o.setAttribute("class",`toc-${e.tagName.toLowerCase()}`),o.appendChild(n),t.children[r>=Math.round(a.length/2)?1:0].appendChild(o)})});const getColorHash=t=>{var a=0;if(0===t.length)return a;for(var e=0;e<t.length;e++)a=t.charCodeAt(e)+((a<<5)-a),a&=a;var r="#";for(e=0;e<3;e++){r+=("00"+(a>>8*e&255).toString(16)).substr(-2)}return r},generalColorHashing=t=>getColorHash(t.chart.data.labels[t.dataIndex]),updateProgressBar=(t,a=!0)=>{a&&step++,document.querySelector("#title .status").textContent=`${t}`,document.querySelector("#title .progress-bar").style.width=`${step/totalSteps*100}%`},processData=()=>{forEveryPresence((t,a)=>{t.name===undefined?(t.name===undefined&&console.log(`${a} has no metadata`),delete data.presence[a]):(t.users===undefined&&(console.log(`${a} has no user count`),t.users=0),data.presence[a].additional={},data.presence[a].additional.userPercentage=t.users/totalUsers*100,data.presence[a].additional.hot=data.presence[a].additional.userPercentage>5,data.presence[a].additional.partner=!!(data.partner.indexOf(a)+1))}),imgurAllow&&forEveryPresence((t,a)=>{t.metadata.logo.startsWith("https://proxy.duckduckgo.com/iu/?u=")&&(data.presence[a].metadata.logo=t.metadata.logo.substring(35)),t.metadata.thumbnail.startsWith("https://proxy.duckduckgo.com/iu/?u=")&&(data.presence[a].metadata.thumbnail=t.metadata.thumbnail.substring(35))}),document.querySelector("#usage-1-1 p").textContent=totalUsers,document.querySelector("#usage-1-2 p").textContent=Math.round(.05*totalUsers),tableData.presence=new List(["Presence","Category","Author","Users","Search Tags"],Object.values(data.presence).map(t=>[t.name,t.metadata.category,t.metadata.author.name,t.users,t.metadata.tags.join(" ")])),tableData.presence.data.forEach(t=>{data.presence[t[0]].metadata.altnames&&(t[4]+=` ${data.presence[t[0]].metadata.altnames.join(" ")}`)}),tables.presence=$("table#presence").DataTable(tableSettings).column(5).visible(!1).rows.add(tableData.presence.data.map(t=>['<span class="iconify" data-icon="ic:baseline-add-circle-outline"></span>',...t])).order([[4,"des"]]).draw(),$("table#presence tbody").on("click","td.details-control",t=>{const a=$(t.target).closest("tr"),e=tables.presence.row(a),r=t=>{const a=t[1],e=a.toLowerCase().replace(" ","-");let r=[];r.push(`<p><strong>Service</strong>: ${a}</p>`),r.push(`<p><strong>Author</strong>: <a href="https://premid.app/users/${data.presence[a].metadata.author.id}">${data.presence[a].metadata.author.name}</a></p>`),data.presence[a].metadata.contributors&&r.push(`<p><strong>Contributors</strong>: ${data.presence[a].metadata.contributors.map(t=>`<a href="https://premid.app/users/${t.id}">${t.name}</a>`).join(", ")}</p>`),r.push(`<p><strong>Version</strong>: ${data.presence[a].metadata.version}</p>`),r.push(`<p><strong>Users</strong>: ${data.presence[a].users} (${Math.round(100*data.presence[a].additional.userPercentage)/100}%${data.presence[a].additional.hot?", \ud83d\udd25":""})</p>`),r.push(`<p><strong>Category</strong>: ${data.presence[a].metadata.category}`),r.push(`<p><strong>Tags</strong>: ${data.presence[a].metadata.tags.join(", ")}`);let s=data.presence[a].metadata.url;"string"==typeof s?r.push(`<p><strong>URL</strong>: <a href="https:/${s}">${s}</a></p>`):r.push(`<p><strong>URL</strong>: ${s.map(t=>`<a href="https:/${t}">${t}</a>`).join(", ")}</p>`),r.push(`<p style="display:inline-block"><strong>Color</strong>: ${data.presence[a].metadata.color}</p>`),r.push(`<div style="margin-left:4px;width:.9rem;height:.9rem;background:${data.presence[a].metadata.color};border:.1rem solid #bbb;display:inline-block" />`),r.push(`<p><strong>Alternative Name</strong>: ${data.presence[a].metadata.altnames?data.presence[a].metadata.altnames.join(", "):"None"}</p>`),r.push(`<p><strong>Using regex?</strong>: ${data.presence[a].metadata.regExp?`Yes (<code>${data.presence[a].metadata.regExp}</code>)`:"No"}</p>`),r.push(`<p><strong>Using iFrame?</strong>: ${data.presence[a].metadata.iframe?"Yes":"No"}</p>`),r.push(`<p><strong>Using settings?</strong>: ${data.presence[a].metadata.settings?"Yes":"No"}</p>`),r.push(`<p><strong>Partner?</strong>: ${data.presence[a].additional.partner?"Yes":"No"}</p>`);let n=[],o=[];return Object.keys(data.presence[a].metadata.description).forEach((t,e)=>{0!==e?(n.push(`<li class="nav-item"><a href="#card-${t}" class="nav-link" id="tab-${t}" data-toggle="tab" role="tab" aria-controls="card-${t}" aria-selected="true">${t}</a></li>`),o.push(`<div class="tab-pane" id="card-${t}" role="tabpanel" aria-labelledby="tab-${t}">${data.presence[a].metadata.description[t]}</div>`)):(n.push(`<li class="nav-item"><a href="#card-${t}" class="nav-link active" id="tab-${t}" data-toggle="tab" role="tab" aria-controls="card-${t}" aria-selected="true">${t}</a></li>`),o.push(`<div class="tab-pane show active" id="card-${t}" role="tabpanel" aria-labelledby="tab-${t}">${data.presence[a].metadata.description[t]}</div>`))}),`\n\t\t\t\t<div class="child-info">\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t\t${r.join("")}\n\t\t\t\t\t\t\t<p><strong>Description:</strong></p>\n\t\t\t\t\t\t\t<div class="card">\n\t\t\t\t\t\t\t\t<div class="card-header">\n\t\t\t\t\t\t\t\t\t<ul class="nav nav-tabs card-header-tabs" id="card-tab" role="tablist">\n\t\t\t\t\t\t\t\t\t\t${n.join("")}\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="card-body">\n\t\t\t\t\t\t\t\t\t<div class="tab-content" id="card-content">\n\t\t\t\t\t\t\t\t\t\t${o.join("")}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t\t<a href="https://premid.app/store/presences/${a}" target="_blank" class="btn btn-primary" role="button">PreMiD Store</a>\n\t\t\t\t\t\t\t<a href="https://github.com/PreMiD/Presences/tree/master/websites/${a.slice(0,1).toUpperCase()}/${a}" target="_blank" class="btn btn-secondary" role="button">Source Code (GitHub)</a>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<div class="card text-center" style="margin-top:1rem">\n\t\t\t\t\t\t\t\t<div class="card-header">\n\t\t\t\t\t\t\t\t\t<ul class="nav nav-tabs card-header-tabs" id="card-tab" role="tablist">\n\t\t\t\t\t\t\t\t\t\t<li class="nav-item">\n\t\t\t\t\t\t\t\t\t\t\t<a href="#card-logo-${e}" class="nav-link active" id="tab-logo-${e}" data-toggle="tab" role="tab" aria-controls="card-logo-${e}" aria-selected="true">Logo</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li class="nav-item">\n\t\t\t\t\t\t\t\t\t\t\t<a href="#card-thumbnail-${e}" class="nav-link" id="tab-thumbnail-${e}" data-toggle="tab" role="tab" aria-controls="card-thumbnail-${e}" aria-selected="false">Thumbnail</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="card-body" style="background:gray">\n\t\t\t\t\t\t\t\t\t<div class="tab-content" id="card-content">\n\t\t\t\t\t\t\t\t\t\t<div class="tab-pane show active" id="card-logo-${e}" role="tabpanel" aria-labelledby="tab-logo-${e}">\n\t\t\t\t\t\t\t\t\t\t\t<img src="${data.presence[a].metadata.logo}" alt="${data.presence[a].metadata.logo}" style="max-height: 256px; width:100%; object-fit: contain;">\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="tab-pane" id="card-thumbnail-${e}" role="tabpanel" aria-labelledby="tab-thumbnail-${e}">\n\t\t\t\t\t\t\t\t\t\t\t<img src="${data.presence[a].metadata.thumbnail}" alt="${data.presence[a].metadata.thumbnail}" style="max-height: 256px; width:100%; object-fit: contain;">\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`};e.child.isShown()?(e.child.hide(),a.removeClass("shown"),t.target.innerHTML='<span class="iconify" data-icon="ic:baseline-add-circle-outline"></span>'):(e.child(r(e.data())).show(),a.addClass("shown"),t.target.innerHTML='<span class="iconify" data-icon="ic:baseline-remove-circle"></span>')});const t=Object.keys(data.presence).length;document.querySelector("#presence-1-1 p").textContent=t;let a=0;Object.values(data.presence).forEach(t=>{a+=Number(t.users)}),document.querySelector("#presence-1-2 p").textContent=a,document.querySelector("#presence-1-3 p").textContent=Math.round(a/t);let e=Object.values(data.presence).map(t=>[t.name,t.users]).sort((t,a)=>a[1]-t[1]);$("#presence-2 div div table").DataTable(miniTableSettings).rows.add(e.slice(0,10)).draw(),$("#presence-3 div div table").DataTable(miniTableSettings).rows.add(e.slice(6,16)).draw(),initChart("presence","#presence-4 canvas","Users"),chartData.presence.datasets[0].backgroundColor=(t=>data.presence[t.chart.data.labels[t.dataIndex]].metadata.color);let r=t=>{chartData.presence.labels=e.slice(...t).map(t=>t[0]),chartData.presence.datasets[0].data=e.slice(...t).map(t=>t[1]),charts.presence.update()};selectChartElement=document.querySelector("#presence-4 select");for(let a=1;a<Math.ceil(t/100);a++){let t=document.createElement("option");t.value=100*a,t.textContent=`${100*(a-1)+1}-${100*a}`,selectChartElement.appendChild(t)}r([6,106]),document.querySelector("#presence-4 div select").value="106no6",document.querySelector("#presence-4 div select").onchange=(()=>{let t=document.querySelector("#presence-4 div select").value;r("106"===t?[0,106]:"106no6"===t?[6,106]:"all"===t?[0,undefined]:"allno6"===t?[6,undefined]:[t-100,t-0])}),forEveryPresence(t=>{data.category[t.metadata.category]===undefined&&(data.category[t.metadata.category]={category:t.metadata.category,presences:[],users:0,average:0}),data.category[t.metadata.category].presences.push(t.name),data.category[t.metadata.category].users+=t.users}),Object.keys(data.category).forEach(t=>{data.category[t].average=Math.round(data.category[t].users/data.category[t].presences.length)}),tableData.category=new List(["Category","Presences","Users","Average"],Object.values(data.category).map(t=>[t.category,t.presences.length,t.users,t.average])),tables.category=$("table#category").DataTable(tableSettings).rows.add(tableData.category.data.map(t=>['<span class="iconify" data-icon="ic:baseline-add-circle-outline"></span>',...t])).order([[2,"des"]]).draw(),$("table#category tbody").on("click","td.details-control",t=>{const a=$(t.target).closest("tr"),e=tables.category.row(a),r=t=>{const a=t[1],e=[];e.push(`<p><strong>Category</strong>: ${a}</p>`),e.push(`<p><strong>Presence count</strong>: ${data.category[a].presences.length}</p>`),e.push(`<p><strong>User count</strong>: ${data.category[a].users}</p>`),e.push(`<p><strong>User to presence average</strong>: ${data.category[a].average}</p>`),e.push(`<a href="https://premid.app/store?category=${a}" target="_blank" class="btn btn-primary" role="button" style="margin-top:1rem">PreMiD Store</a>`);const r=data.category[a].presences.map(t=>`<a href="https://premid.app/store/presences/${t}">${t}</a>`).sort();return`\n\t\t\t\t<div class="child-info">\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t\t${e.join("")}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t\t<p><strong>Presences</strong>:</p>\n\t\t\t\t\t\t\t${r.join(", ")}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`};e.child.isShown()?(e.child.hide(),a.removeClass("shown"),t.target.innerHTML='<span class="iconify" data-icon="ic:baseline-add-circle-outline"></span>'):(e.child(r(e.data())).show(),a.addClass("shown"),t.target.innerHTML='<span class="iconify" data-icon="ic:baseline-remove-circle"></span>')});let s=Object.values(data.category).length;document.querySelector("#category-1-1 p").textContent=Object.values(data.category).length,s>6&&(holdup=document.createElement("p"),holdup.innerHTML="Hold up. This value should be 6 at all times. Something's wrong here.",document.querySelector("#category-1-1").appendChild(holdup));let n=0,o=0;Object.values(data.category).forEach(t=>{n+=Number(t.presences.length),o+=Number(t.users)}),document.querySelector("#category-1-2 p").textContent=Math.round(n/s),document.querySelector("#category-1-3 p").textContent=Math.round(o/s),$("#category-2 div div table").DataTable(miniTableSettings).rows.add(Object.values(data.category).map(t=>[t.category,t.presences.length]).sort((t,a)=>a[1]-t[1]).slice(0,10)).draw(),$("#category-3 div div table").DataTable(miniTableSettings).rows.add(Object.values(data.category).map(t=>[t.category,t.users]).sort((t,a)=>a[1]-t[1]).slice(0,10)).draw(),$("#category-4 div div table").DataTable(miniTableSettings).rows.add(Object.values(data.category).map(t=>[t.category,t.average]).sort((t,a)=>a[1]-t[1]).slice(0,10)).draw(),initChart("category2","#category-2 canvas","Presences"),chartData.category2.labels=Object.values(data.category).map(t=>[t.category,t.presences.length]).sort((t,a)=>a[1]-t[1]).map(t=>t[0]).slice(0,10),chartData.category2.datasets[0].data=Object.values(data.category).map(t=>t.presences.length).sort((t,a)=>a-t).slice(0,10),chartData.category2.datasets[0].backgroundColor=generalColorHashing,charts.category2.update(),initChart("category3","#category-3 canvas","Users"),chartData.category3.labels=Object.values(data.category).map(t=>[t.category,t.users]).sort((t,a)=>a[1]-t[1]).map(t=>t[0]).slice(0,10),chartData.category3.datasets[0].data=Object.values(data.category).map(t=>t.users).sort((t,a)=>a-t).slice(0,10),chartData.category3.datasets[0].backgroundColor=generalColorHashing,charts.category3.update(),initChart("category4","#category-4 canvas","Average"),chartData.category4.labels=Object.values(data.category).map(t=>[t.category,t.average]).sort((t,a)=>a[1]-t[1]).map(t=>t[0]).slice(0,10),chartData.category4.datasets[0].data=Object.values(data.category).map(t=>t.average).sort((t,a)=>a-t).slice(0,10),chartData.category4.datasets[0].backgroundColor=generalColorHashing,charts.category4.update(),forEveryPresence(t=>{data.author[t.metadata.author.id]===undefined&&(data.author[t.metadata.author.id]={author:t.metadata.author.name,id:t.metadata.author.id,presences:[],users:0,average:0}),data.author[t.metadata.author.id].presences.push(t.name),data.author[t.metadata.author.id].users+=t.users}),Object.keys(data.author).forEach(t=>{data.author[t].average=Math.round(data.author[t].users/data.author[t].presences.length)}),tableData.author=new List(["Author","ID","Presences","Users"],Object.values(data.author).map(t=>[t.author,t.id,t.presences.length,t.users,t.average])),tables.author=$("table#author").DataTable(tableSettings).rows.add(tableData.author.data.map(t=>['<span class="iconify" data-icon="ic:baseline-add-circle-outline"></span>',...t])).order([[3,"des"]]).draw(),$("table#author tbody").on("click","td.details-control",t=>{const a=$(t.target).closest("tr"),e=tables.author.row(a),r=t=>{const a=t[2],e=[];e.push(`<p><strong>Author</strong>: ${data.author[a].author} (<code>${a}</code>)</p>`),e.push(`<p><strong>Presence count</strong>: ${data.author[a].presences.length}</p>`),e.push(`<p><strong>User count</strong>: ${data.author[a].users}</p>`),e.push(`<p><strong>User to presence average</strong>: ${data.author[a].average}</p>`),e.push(`<a href="https://premid.app/users/${a}" target="_blank" class="btn btn-primary" role="button" style="margin-top:1rem">PreMiD Store</a>`);const r=data.author[a].presences.map(t=>`<a href="https://premid.app/store/presences/${t}">${t}</a>`).sort();return`\n\t\t\t\t<div class="child-info">\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t\t${e.join("")}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t\t<p><strong>Presences</strong>:</p>\n\t\t\t\t\t\t\t${r.join(", ")}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`};e.child.isShown()?(e.child.hide(),a.removeClass("shown"),t.target.innerHTML='<span class="iconify" data-icon="ic:baseline-add-circle-outline"></span>'):(e.child(r(e.data())).show(),a.addClass("shown"),t.target.innerHTML='<span class="iconify" data-icon="ic:baseline-remove-circle"></span>')});let c=Object.values(data.author).length;document.querySelector("#author-1-1 p").textContent=Object.values(data.author).length;let l=0,d=0;Object.values(data.author).forEach(t=>{l+=Number(t.presences.length),d+=Number(t.users)}),document.querySelector("#author-1-2 p").textContent=Math.round(l/c),document.querySelector("#author-1-3 p").textContent=Math.round(d/c),$("#author-2 div div table").DataTable(miniTableSettings).rows.add(Object.values(data.author).map(t=>[t.author,t.presences.length]).sort((t,a)=>a[1]-t[1]).slice(0,10)).draw(),$("#author-3 div div table").DataTable(miniTableSettings).rows.add(Object.values(data.author).map(t=>[t.author,t.users]).sort((t,a)=>a[1]-t[1]).slice(0,10)).draw(),$("#author-4 div div table").DataTable(miniTableSettings).rows.add(Object.values(data.author).map(t=>[t.author,t.average]).sort((t,a)=>a[1]-t[1]).slice(0,10)).draw(),initChart("author2","#author-2 canvas","Presences"),chartData.author2.labels=Object.values(data.author).map(t=>[t.author,t.presences.length]).sort((t,a)=>a[1]-t[1]).map(t=>t[0]).slice(0,10),chartData.author2.datasets[0].data=Object.values(data.author).map(t=>t.presences.length).sort((t,a)=>a-t).slice(0,10),chartData.author2.datasets[0].backgroundColor=generalColorHashing,charts.author2.update(),initChart("author3","#author-3 canvas","Users"),chartData.author3.labels=Object.values(data.author).map(t=>[t.author,t.users]).sort((t,a)=>a[1]-t[1]).map(t=>t[0]).slice(0,10),chartData.author3.datasets[0].data=Object.values(data.author).map(t=>t.users).sort((t,a)=>a-t).slice(0,10),chartData.author3.datasets[0].backgroundColor=generalColorHashing,charts.author3.update(),initChart("author4","#author-4 canvas","Average"),chartData.author4.labels=Object.values(data.author).map(t=>[t.author,t.average]).sort((t,a)=>a[1]-t[1]).map(t=>t[0]).slice(0,10),chartData.author4.datasets[0].data=Object.values(data.author).map(t=>t.average).sort((t,a)=>a-t).slice(0,10),chartData.author4.datasets[0].backgroundColor=generalColorHashing,charts.author4.update(),initChart("author5","#author-5 canvas",""),chartData.author5.datasets[0].backgroundColor=generalColorHashing,chartData.author5.labels=Object.values(data.author).map(t=>[t.author,t.users]).sort((t,a)=>a[1]-t[1]).map(t=>t[0]).slice(2),chartData.author5.datasets[0].data=Object.values(data.author).map(t=>t.users).sort((t,a)=>a-t).slice(2),chartData.author5.datasets[0].label="Users",charts.author5.update(),document.querySelector("#author-5 div select").value="usernotop",document.querySelector("#author-5 div select").onchange=(()=>{switch(document.querySelector("#author-5 div select").value){case"presence":chartData.author5.labels=Object.values(data.author).map(t=>[t.author,t.presences.length]).sort((t,a)=>a[1]-t[1]).map(t=>t[0]),chartData.author5.datasets[0].data=Object.values(data.author).map(t=>t.presences.length).sort((t,a)=>a-t),chartData.author5.datasets[0].label="Presences";break;case"presencenotop":chartData.author5.labels=Object.values(data.author).map(t=>[t.author,t.presences.length]).sort((t,a)=>a[1]-t[1]).map(t=>t[0]).slice(1),chartData.author5.datasets[0].data=Object.values(data.author).map(t=>t.presences.length).sort((t,a)=>a-t).slice(1),chartData.author5.datasets[0].label="Presences";break;case"user":chartData.author5.labels=Object.values(data.author).map(t=>[t.author,t.users]).sort((t,a)=>a[1]-t[1]).map(t=>t[0]),chartData.author5.datasets[0].data=Object.values(data.author).map(t=>t.users).sort((t,a)=>a-t),chartData.author5.datasets[0].label="Users";break;case"usernotop":chartData.author5.labels=Object.values(data.author).map(t=>[t.author,t.users]).sort((t,a)=>a[1]-t[1]).map(t=>t[0]).slice(3),chartData.author5.datasets[0].data=Object.values(data.author).map(t=>t.users).sort((t,a)=>a-t).slice(3),chartData.author5.datasets[0].label="Users";break;case"average":chartData.author5.labels=Object.values(data.author).map(t=>[t.author,t.average]).sort((t,a)=>a[1]-t[1]).map(t=>t[0]),chartData.author5.datasets[0].data=Object.values(data.author).map(t=>t.average).sort((t,a)=>a-t),chartData.author5.datasets[0].label="Average";break;case"averagenotop":chartData.author5.labels=Object.values(data.author).map(t=>[t.author,t.average]).sort((t,a)=>a[1]-t[1]).map(t=>t[0]).slice(1),chartData.author5.datasets[0].data=Object.values(data.author).map(t=>t.average).sort((t,a)=>a-t).slice(1),chartData.author5.datasets[0].label="Average"}charts.author5.update()});let i=9,u=Array(i+1).fill(0);forEveryPresence(t=>{t.metadata.iframe&&u[1]++,t.metadata.contributors&&u[2]++,t.metadata.regExp&&u[4]++,1!==Object.keys(t.metadata.description).length&&"object"==typeof t.metadata.description&&u[5]++,t.additional.partner&&u[6]++,t.additional.hot&&u[7]++,t.metadata.altnames&&u[8]++,t.metadata.settings&&(u[3]++,0!==t.metadata.settings.filter(t=>t.multiLanguage).length&&u[9]++)});for(var p=1;p<i+1;p++)document.querySelector(`#implementation-${p} p`).textContent=u[p],document.querySelectorAll(`#implementation-${p} p`)[1].textContent=`${Math.round(u[p]/t*100)}% (${u[p]}/${t})`;forEveryPresence(t=>{"object"==typeof t.metadata.description&&Object.keys(t.metadata.description).forEach(a=>{let e;e=2===a.split("_").length?`${a.split("_")[0]}_${a.split("_")[1].toUpperCase()}`:a,data.lang[e]===undefined&&(data.lang[e]={language:locale[e],tag:e,presences:[]}),data.lang[e].presences.push(t.name)})}),document.querySelector("#lang-1-1 p").textContent=u[5],document.querySelector("#lang-1-2 p").textContent=Object.keys(data.lang).length,$("#lang-2 div div table").DataTable(miniTableSettings).rows.add(Object.values(data.lang).map(t=>[`${t.language} (${t.tag})`,t.presences.length]).sort((t,a)=>a[1]-t[1]).slice(0,10)).draw(),initChart("lang2","#lang-2 canvas","Presences"),chartData.lang2.labels=Object.values(data.lang).map(t=>[`${t.language} (${t.tag})`,t.presences.length]).sort((t,a)=>a[1]-t[1]).slice(0,10).map(t=>t[0]),chartData.lang2.datasets[0].data=Object.values(data.lang).map(t=>t.presences.length).sort((t,a)=>a-t).slice(0,10),chartData.lang2.datasets[0].backgroundColor=generalColorHashing,charts.lang2.update(),tableData.lang=new List(["Language","Tag","Presences"],Object.values(data.lang).map(t=>[t.language,t.tag,t.presences.length])),tables.lang=$("table#lang").DataTable(tableSettings).rows.add(tableData.lang.data.map(t=>['<span class="iconify" data-icon="ic:baseline-add-circle-outline"></span>',...t])).order([[3,"des"]]).draw(),document.querySelector("#lang-3 select").onchange=(()=>{switch(document.querySelector("#lang-3 select").value){case"all":chartData.lang3.labels=Object.values(data.lang).map(t=>[`${t.language} (${t.tag})`,t.presences.length]).sort((t,a)=>a[1]-t[1]).map(t=>t[0]),chartData.lang3.datasets[0].data=Object.values(data.lang).map(t=>t.presences.length).sort((t,a)=>a-t);break;case"no1":chartData.lang3.labels=Object.values(data.lang).map(t=>[`${t.language} (${t.tag})`,t.presences.length]).sort((t,a)=>a[1]-t[1]).slice(1).map(t=>t[0]),chartData.lang3.datasets[0].data=Object.values(data.lang).map(t=>t.presences.length).sort((t,a)=>a-t).slice(1)}charts.lang3.update()}),initChart("lang3","#lang-3 canvas","Presences"),chartData.lang3.labels=Object.values(data.lang).map(t=>[`${t.language} (${t.tag})`,t.presences.length]).sort((t,a)=>a[1]-t[1]).map(t=>t[0]),chartData.lang3.datasets[0].data=Object.values(data.lang).map(t=>t.presences.length).sort((t,a)=>a-t),chartData.lang3.datasets[0].backgroundColor=generalColorHashing,charts.lang3.update(),$("table#lang tbody").on("click","td.details-control",t=>{const a=$(t.target).closest("tr"),e=tables.lang.row(a),r=t=>{const a=t[2],e=[];e.push(`<p><strong>Language</strong>: ${data.lang[a].language} (${a})</p>`),e.push(`<p><strong>Presence count</strong>: ${data.lang[a].presences.length}`);const r=[];return data.lang[a].presences.forEach(t=>{r.push(`<a href="https://premid.app/store/presences/${t}">${t}</a>`)}),`\n\t\t\t\t<div class="child-info">\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="col-12">\n\t\t\t\t\t\t\t${e.join("")}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t<div class="col-12">\n\t\t\t\t\t\t\t<p><strong>Presences</strong>:</p>\n\t\t\t\t\t\t\t${r.join(", ")}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`};e.child.isShown()?(e.child.hide(),a.removeClass("shown"),t.target.innerHTML='<span class="iconify" data-icon="ic:baseline-add-circle-outline"></span>'):(e.child(r(e.data())).show(),a.addClass("shown"),t.target.innerHTML='<span class="iconify" data-icon="ic:baseline-remove-circle"></span>')})};document.addEventListener("DOMContentLoaded",()=>{$.fn.dataTable.ext.errMode="none",(async()=>{await Promise.all([(()=>new Promise(t=>{$.get("https://i.imgur.com/removed.png").done(()=>imgurAllow=!0).fail(()=>imgurAllow=!1).always(()=>{updateProgressBar(`Preparing... (${step+1}/2)`),t()})}))(),(()=>new Promise(t=>{getData(jsonData.locale,a=>{locale=a,updateProgressBar(`Preparing... (${step+1}/2)`),t()})}))()]),await(()=>new Promise(t=>{updateProgressBar("Fetching data...",!1);const a=()=>{updateProgressBar(`Fetching data... (${step-1}/1)`),step===totalSteps&&(document.querySelector("#title .status").textContent=`All data fetched! Fetched on ${(new Date).toString()}`,document.querySelector("#main-stats").removeAttribute("hidden"),document.querySelector("#main-tables").removeAttribute("hidden"),document.querySelector("#toc").removeAttribute("hidden"),"complete"===document.readyState||"interactive"===document.readyState?processData():document.addEventListener("DOMContentLoaded",()=>processData())),t()};fetch("https://api.premid.app/v3",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"{usage{count},presences{metadata{author{id,name},contributors{id,name},altnames,service,description,url,version,logo,thumbnail,color,tags,category,iframe,regExp,iframeRegExp,readLogs,button,warning,settings{id,title,icon,if{propretyNames,patternProprties},placeholder,value,values,multiLanguage}},users},partners{name}}"})}).then(t=>t.json()).then(t=>t.data).then(t=>{t.presences.forEach(t=>{data.presence[t.metadata.service]={},data.presence[t.metadata.service].users=data.presence[t.metadata.service]={name:t.metadata.service,metadata:t.metadata,users:t.users}}),console.log(data.presence),totalUsers=t.usage.count,data.partner=t.partners.map(t=>t.name),a()})}))()})()});