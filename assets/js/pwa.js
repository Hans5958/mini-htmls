const brandEl=document.querySelector(".navbar-brand"),disableStyleEl=document.createElement("style");disableStyleEl.textContent="a[href^=http] {\n\tcolor: inherit;\n\tpointer-events: none;\n}";const pwaEl=document.createElement("span");let pwaIsStandalone;pwaEl.className="nav-text ml-md-2 mr-1 mr-md-2 badge badge-info",pwaEl.textContent="PWA active",pwaEl.classList.add("mr-1"),pwaEl.classList.add("mr-md-2");const pwaHandleConnection=()=>{pwaIsStandalone?(pwaEl.textContent="Standalone mode",pwaGatekeepOn()):navigator.onLine?(pwaEl.textContent="PWA active",pwaGatekeepOff()):(pwaEl.textContent="Offline mode",pwaGatekeepOn())},pwaHandleStandalone=e=>{e?(pwaIsStandalone=!0,pwaEl.textContent="Standalone mode",pwaGatekeepOn()):(pwaIsStandalone=!1,pwaEl.textContent="PWA active",pwaGatekeepOff())},pwaGatekeepOff=()=>{pwaEl.classList.add("ml-md-2"),brandEl.style.pointerEvents="",document.querySelector(".navbar-nav").style.display="",document.head.contains(disableStyleEl)&&document.head.removeChild(disableStyleEl)},pwaGatekeepOn=()=>{pwaEl.classList.remove("ml-md-2"),brandEl.style.pointerEvents="none",document.querySelector(".navbar-nav").style.display="none",document.head.contains(disableStyleEl)||document.head.appendChild(disableStyleEl)};window.matchMedia("(display-mode: standalone)").addEventListener("change",({matches:e})=>{pwaHandleStandalone(e)}),window.addEventListener("online",pwaHandleConnection),window.addEventListener("offline",pwaHandleConnection);const documentReadyPwa=()=>{document.querySelector("#collapsibleNavbar").insertBefore(pwaEl,document.querySelector("#collapsibleNavbar").children[1]);const{matches:e}=window.matchMedia("(display-mode: standalone)");pwaHandleStandalone(e),pwaHandleConnection()};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("pwa-sw.js").then(()=>{documentReadyPwa()})});